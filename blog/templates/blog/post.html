{% extends "public/base.html" %}

{% load staticfiles %}
{% load get_initials %}


{% block title %}Kuikuiter - Comments of Post nÂ° {% endblock %}

{% block header_css %}
<link rel="stylesheet" type="text/x-scss" href="{% static 'blog/css/style.scss' %}" />
{% endblock %}

{% block header_js %}
<script type="text/javascript" src="{% static 'blog/js/post.js' %}"></script>
{% endblock %}

{% block content %}
{% getinitials request.user as user_initals %}


<div class="home">
	<div class="left">
		<div class="profile_block">
			<div class="profile">
				<div class="account">
					<div class="user_logo">
						{{ user_initals }}
					</div>
					<div class="account_information">
						<div class="name">{{ request.user.first_name }} {{ request.user.last_name }}</div>
						<div class="username">{{ request.user.username }}</div>
					</div>
				</div>
				<div class="stats">
					<div class="stats_col">
						<div class="stats_name">Tweets</div>
						<div class="stats_value" id="tweet_counter">{{ request.user.tweet_counter }}</div>
					</div>

					<div class="stats_col">
						<div class="stats_name">Likes</div>
						<div class="stats_value">{{ request.user.posts_like.all.count }}</div>
					</div>

					<div class="stats_col">
						<div class="stats_name">Comments</div>
						<div class="stats_value">42</div>
					</div>
				</div>
			</div>
			
		</div>
	</div>
	<div class="middle">
        	<div class="block_post">
			<div class="user_logo">
				{{ user_initals }}
			</div>
			<div class="block_text">
				<div class="account_information">
					<div class="name">{{ post.user.first_name }} {{ post.user.last_name }}</div>
					<div class="username">{{ post.user.username }}</div>
				</div>
				<div class="post">{{ post.text }}</div>
				<div class="date">{{ post.created_at }}</div>
				<div class="actions">
                        <div data-href="{% url 'blog:like_post' post_id=post.pk %}" class="like">
						{% if post in likes %}
						<div class="icon_like" alt="Like">{{ post.like_counter }}</div>
						{% else %}
						<div class="icon_not_like" alt="Unlike">{{ post.like_counter }}</div>
						{% endif %}
					</div>
				</div>
			</div>	
		</div>
		<div class="block_post">
		{% for comment in post.comment_set.all %}
			{% getinitials post.user as user_initals %}
    			<div class="block_text">
    				<div class="account_information">
    					<div class="name">{{ comment.user.first_name }} {{ comment.user.last_name }}</div>
    					<div class="username">{{ comment.user.username }}</div>
    				</div>
    				<div class="post">{{ comment.text }}</div>
    				<div class="date">{{ comment.created_at }}</div>
    				{% empty %}
            		<p class="no_comments">No comments yet</p>
            	{% endfor %}
		</div>
		<div class="add_comment">			
			<div class="block_post">
			<div class="user_logo">
				{{ user_initals }}
			</div>
    			</div>
            		
    			<form action="{% url 'blog:add_comment' post_id=post.pk %}" method="post" class="add_comment_form">
    				{% csrf_token %}
    				<textarea type="text" name="add_comment" placeholder="What {{ request.user.first_name }}? Wanna say something?" 
    				class="textarea_input add_comment_input" maxlength="1024" required></textarea>
    			</form>
		</div>
	</div>
</div>

{% endblock %}